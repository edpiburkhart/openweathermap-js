function defaults(o){o.appid&&(options.appid=o.appid),o.location&&(options.location=o.location),o.cityID&&(options.cityID=o.cityID),o.coord&&(o.coord.lat&&(options.coord.lat=o.coord.lat),o.coord.lon&&(options.coord.lon=o.coord.lon)),o.ZIPcode&&(options.ZIPcode=o.ZIPcode),o.bbox&&(options.bbox=o.bbox),void 0!==o.cluster&&(options.cluster=o.cluster),o.cnt&&(options.cnt=o.cnt),o.method&&(options.method=o.method),o.format&&(options.format=o.format),o.accuracy&&(options.accuracy=o.accuracy),o.units&&(options.units=o.units),o.lang&&(options.lang=o.lang)}function current(o,t){void 0===t&&(t=o,o={}),o.appid||options.appid||t(new Error("You must define an Api KEY !")),o.method||(o.method=options.method);var a="http://api.openweathermap.org/data/2.5";switch(o.method.toLowerCase()){case"name":case"city":case"cityname":case"city-name":a+="/weather?q=",a+=o.location?o.location:options.location;break;case"cityid":case"id":a+="/weather?id=",a+=o.cityID?o.cityID:options.cityID;break;case"coord":case"coordinates":a+="/weather?lat=",a+=o.coord.lat?o.coord.lat:options.coord.lat,a+="&lon=",a+=o.coord.lon?o.coord.lon:options.coord.lon;break;case"zipcode":case"code":case"zip":a+="/weather?zip=",a+=o.ZIPcode?o.ZIPcode:options.ZIPcode;break;case"box":case"rectangle":a+="/box/city?bbox=",a+=o.bbox?o.bbox:options.bbox,a+="&cluster=",a+=void 0!==o.cluster?o.cluster?"yes":"no":options.cluster?"yes":"no";break;case"cycle":a+="/find?lat=",a+=o.coord.lat?o.coord.lat:options.coord.lat,a+="&lon=",a+=o.coord.lon?o.coord.lon:options.coord.lon,a+="&cnt=",a+=o.cnt?o.cnt:options.cnt;break;case"group":a+="/group?id=",a+=o.id?o.cityID:options.cityID;break;default:throw new Error("Request method has not been set !")}(o.format||options.format)&&(a+="&mode="+(o.format?o.format:options.format)),(o.accuracy||options.accuracy)&&(a+="&type="+(o.accuracy?o.accuracy:options.accuracy)),(o.units||options.units)&&(a+="&units="+(o.units?o.units:options.units)),(o.lang||options.lang)&&(a+="&lang="+(o.lang?o.lang:options.lang)),a+="&appid="+(o.appid?o.appid:options.appid),request(a,function(a,c,n){a||200!=c.statusCode?t(a,c):(o.format?o.format.toLowerCase():!options.format||"json"==options.format.toLowerCase())?t(void 0,JSON.parse(n)):t(void 0,n)})}const request=require("request");var options={};exports.defaults=defaults,exports.current=current;